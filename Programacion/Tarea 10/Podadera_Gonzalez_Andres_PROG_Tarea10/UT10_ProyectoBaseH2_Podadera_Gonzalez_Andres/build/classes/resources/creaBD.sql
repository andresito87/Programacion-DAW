DROP TABLE IF EXISTS TRAYECTO ;
DROP TABLE IF EXISTS COCHE ;
DROP TABLE IF EXISTS CONDUCTOR ;

CREATE TABLE CONDUCTOR  (
  NSS        INT NOT NULL PRIMARY KEY,
  NOMBRE     VARCHAR(30) NOT NULL,
  APELLIDOS  VARCHAR(45) NOT NULL
);

CREATE TABLE COCHE  (
  N_BASTIDOR   INT NOT NULL PRIMARY KEY,
  MATRICULA    VARCHAR(7) NOT NULL,
  MARCA        VARCHAR(15) NOT NULL,
  MODELO       VARCHAR(15) NOT NULL,
  COLOR        VARCHAR(15) NOT NULL
);

CREATE TABLE TRAYECTO  (
  NSS             INT NOT NULL,
  N_BASTIDOR      INT NOT NULL,
  FECHA           DATETIME NOT NULL,
  KMS             INT NOT NULL,
  GASTOREPOSTAJE  DOUBLE NOT NULL,
  PRIMARY KEY(NSS,N_BASTIDOR,FECHA), 
  FOREIGN KEY(NSS) REFERENCES PUBLIC.CONDUCTOR(NSS) ON UPDATE CASCADE ON DELETE CASCADE,
  FOREIGN KEY(N_BASTIDOR) REFERENCES PUBLIC.COCHE(N_BASTIDOR) ON UPDATE CASCADE ON DELETE CASCADE 
);
